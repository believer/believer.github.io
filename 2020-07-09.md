# 2020-07-09

## Did you learn anything new today?

I did a [[refactoring]] task today which involved moving logic from our [[react]] [[frontend]] to our [[ruby-on-rails]] [[backend]]. In the process I got to try out a bunch of new features that I hadn't interacted with before as a relative newbie to [[ruby-on-rails]].

- How to create a service and how to instantiate it from a controller view. In this service I also used the `_path` helper methods. These helper methods are added automatically to controllers, so I had to learn how to explicitly add those in a service.

```ruby
private

Helpers = Class.new {
  include Routing
}

private_constant :Helpers

def helpers
  @helpers ||= Helpers.new
end
```

- How hashes work and how to conditionally add/remove values

```ruby
def test(price: nil)
  # Default hash
  base = {
    caption: "test"
  }

  # Add price if one is passed in
  base[:price] = price if price

  # Remove caption if price is set
  base.except!(:caption) if price

  # Return hash
  base
end
```

- Got to do more testing with [[rspec]] to test the new service I added. I also got to add integration tests and learned how to test actual [[json]] data being set in the view.

[//begin]: # "Autogenerated link references for markdown compatibility"
[refactoring]: refactoring "Refactoring"
[react]: react "React"
[frontend]: frontend "Frontend"
[ruby-on-rails]: ruby-on-rails "Ruby on Rails"
[backend]: backend "Backend"
[rspec]: rspec "RSpec"
[json]: json "JSON"
[//end]: # "Autogenerated link references"
